(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20fec6"],{b662:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-breadcrumb",{staticStyle:{margin:"10px 5px"}},[a("a-breadcrumb-item",[t._v(t._s(t.$t("products")))])],1)],1),a("a-col",{attrs:{span:12}},[a("router-link",{attrs:{to:"./create"}},[a("a-button",{staticStyle:{float:"right"},attrs:{shape:"round",type:"primary link",icon:"plus"}},[t._v(t._s(t.$t("add")))])],1)],1)],1),a("a-card",{attrs:{title:t.$t("list")}},[a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-form",{attrs:{layout:"horizontal",form:t.form},on:{submit:t.search}},[a("a-row",[a("a-col",{staticStyle:{padding:"5px"},attrs:{span:12}},[a("a-form-item",{staticStyle:{margin:"0"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["search",{initialValue:this.getSearchQuery}],expression:"['search', { initialValue: this.getSearchQuery }]"},{name:"debounce",rawName:"v-debounce",value:t.debouncedSearch,expression:"debouncedSearch"}],attrs:{id:"inputSearch",placeholder:t.$t("search")+"..."}})],1)],1),a("a-col",{staticStyle:{padding:"5px"},attrs:{span:12}},[a("a-form-item",{staticStyle:{margin:"0"}},[a("a-button",{attrs:{id:"buttonSearch",type:"default","html-type":"submit",icon:"search"}},[t._v(t._s(t.$t("search")))])],1)],1)],1)],1)],1),a("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.productsData,pagination:t.getPagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"tag",fn:function(e){return[a("a-tag",{attrs:{color:"red"}},[t._v(t._s(e))])]}},{key:"status",fn:function(e){return[e?a("a-tag",{attrs:{color:"#108ee9"}},[t._v(" "+t._s(t.$t("active"))+" ")]):a("a-tag",{attrs:{color:"#f50"}},[t._v(" "+t._s(t.$t("inactive"))+" ")])]}},{key:"action",fn:function(e,r){return[a("a-tooltip",[a("template",{slot:"title"},[t._v(t._s(t.$t("read")))]),a("a-button",{attrs:{id:"buttonPreview",type:"default",icon:"eye"},on:{click:function(e){return t.showPreviewModal(r.id)}}})],2),a("router-link",{attrs:{to:{path:"./update/"+r.slug,pagination:t.getPagination}}},[a("a-tooltip",[a("template",{slot:"title"},[t._v(t._s(t.$t("update")))]),a("a-button",{attrs:{id:"buttonUpdate",type:"primary",icon:"edit"}})],2)],1),a("a-popconfirm",{attrs:{slot:"extra",placement:"topRight",title:t.$t("deleteMsg"),okText:t.$t("yes"),cancelText:t.$t("no")},on:{confirm:function(e){return t.deleteProduct(e,r.slug)}},slot:"extra"},[a("a-tooltip",[a("template",{slot:"title"},[t._v(t._s(t.$t("delete")))]),a("a-button",{attrs:{id:"buttonDelete",type:"danger",icon:"delete"}})],2)],1)]}}])})],1),t.selectedProduct?a("a-modal",{attrs:{width:"800px",title:t.$t("previewProduct")},on:{cancel:t.handleCloseModal},model:{value:t.previewVisible,callback:function(e){t.previewVisible=e},expression:"previewVisible"}},[a("a-descriptions",{attrs:{layout:"vertical",bordered:""}},[a("a-descriptions-item",{attrs:{label:t.$t("name")}},[t._v(" "+t._s(t.selectedProduct.name)+" ")]),a("a-descriptions-item",{attrs:{label:t.$t("brand_name")}},[t._v(" "+t._s(t.selectedProduct.brand.name)+" ")]),a("a-descriptions-item",{attrs:{label:t.$t("category_name")}},[t._v(" "+t._s(t.selectedProduct.category.name)+" ")]),a("a-descriptions-item",{attrs:{label:t.$t("product_external_id")}},[t._v(" "+t._s(t.selectedProduct.external_id)+" ")]),a("a-descriptions-item",{attrs:{label:t.$t("price")}},[a("p",[t._v("Current Price: "+t._s(this.numberToPrice(t.selectedProduct.price.price)))]),a("p",[t._v("Old Price: "+t._s(this.numberToPrice(t.selectedProduct.price.old_price)))])]),a("a-descriptions-item",{attrs:{label:t.$t("status")}},[t.selectedProduct.active?a("a-tag",{attrs:{color:"#108ee9"}},[t._v(" "+t._s(t.$t("active"))+" ")]):a("a-tag",{attrs:{color:"#f50"}},[t._v(" "+t._s(t.$t("inactive"))+" ")])],1),a("a-descriptions-item",{attrs:{label:t.$t("productPicture")}},[a("img",{staticStyle:{"max-height":"800px","max-width":"100%"},attrs:{src:t.selectedProduct.image}})])],1),a("template",{slot:"footer"},[a("a-button",{key:"back",attrs:{id:"buttonCancel"},on:{click:t.handleCancel}},[t._v(" "+t._s(t.$t("cancel"))+" ")])],1)],2):t._e()],1)},n=[],i=(a("b0c0"),a("d3b7"),a("5530")),o=a("5880"),c=a("b775"),s=a("ca00");function u(t,e){for(var a=0;a<t.length;a++)if(t[a].id===e)return t[a]}function d(t,e){for(var a=0;a<t.length;a++)if(t[a].id===e)return t[a].name}var l={data:function(){return{data:[],loading:!0,columns:[{title:this.$t("product_name"),dataIndex:"name"},{title:this.$t("product_external_id"),key:"tag",dataIndex:"external_id",scopedSlots:{customRender:"tag"},width:"10%"},{title:this.$t("brand"),dataIndex:"brand.name"},{title:this.$t("category_name"),dataIndex:"category.name"},{title:this.$t("status"),dataIndex:"active",scopedSlots:{customRender:"status"}},{title:this.$t("action"),key:"action",width:"20%",scopedSlots:{customRender:"action"}}],form:this.$form.createForm(this,{name:"coordinated"}),previewVisible:!1,products:[],selectedProduct:null,productsPaginationCurrent:{},selectedProductCategory:"",updateVisible:!1,filterParams:{},page:{current:1,pageSize:10,total:45},Interval:null}},computed:Object(i["a"])(Object(i["a"])({},Object(o["mapGetters"])(["productsData","productsPagination","categories","categoriesWithChildren","searchQuery"])),{},{getPagination:function(){return this.productsPagination},getSearchQuery:function(){return this.searchQuery}}),mounted:function(){var t=this;this.getCategories(),this.getProducts({page:this.productsPagination}).then((function(){})).catch((function(e){t.$message.error(t.$t("error"))})).finally((function(){return t.loading=!1}))},beforeDestroy:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(o["mapActions"])(["getProducts","getCategories","setSearchQuery"])),{},{handleTableChange:function(t){var e=this;this.loading=!0,this.getProducts({page:t,search:!0}).then((function(t){})).catch((function(t){return e.requestFailed(t)})).finally((function(){return e.loading=!1}))},getSelectedProduct:function(t){this.selectedProduct=u(this.productsData,t),this.selectedProductCategory=d(this.categoriesWithChildren,this.selectedProduct.category_id)},showPreviewModal:function(t){this.getSelectedProduct(t),this.previewVisible=!0},handleCancel:function(){this.previewVisible=!1},handleCloseModal:function(){this.selectedProduct=null},debouncedSearch:function(t){var e=this;this.setSearchQuery(t),this.loading=!0,this.getProducts().then((function(t){})).catch((function(t){return e.requestFailed(t)})).finally((function(){return e.loading=!1}))},deleteProduct:function(t,e){var a=this;this.loading=!0,Object(c["b"])({url:"/product/"+e,method:"delete"}).then((function(t){a.$message.success(a.$t("successfullyDeleted")),a.getProducts({page:a.productsPagination}).then((function(){if(a.products=[],a.productsPaginationCurrent.total-10*a.productsPaginationCurrent.current>0){for(var t=0;t<10;t++)a.products.push(a.productsData[t+10*(a.productsPaginationCurrent.current-1)]);a.productsthis.productsPaginationCurrentCurrent=a.productsPaginationCurrent}else{for(var e=a.productsPaginationCurrent.total-10*(a.productsPaginationCurrent.current-1),r=0;r<e;r++)a.products.push(a.productsData[r+10*(a.productsPaginationCurrent.current-1)]);a.productsPaginationCurrent=a.productsPagination}})),a.handleTableChange(a.productsPaginationCurrent)})).catch((function(t){a.$message.error(t)})).finally((function(){return a.loading=!1}))},search:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){t||(e.loading=!0,e.filterParams=a,e.getProducts().then((function(t){})).catch((function(t){})).finally((function(){e.loading=!1})))}))},numberToPrice:function(t){return Object(s["a"])(t)}})},p=l,h=a("2877"),g=Object(h["a"])(p,r,n,!1,null,null,null);e["default"]=g.exports}}]);