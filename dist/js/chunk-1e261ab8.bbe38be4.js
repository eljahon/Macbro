(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e261ab8"],{"207c":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{title:t.$t("attributes")}},[a("a-card",[a("a-row",{attrs:{type:"flex",justify:"space-between"}},[a("a-col",{attrs:{span:4}},[a("a-button",{attrs:{type:"primary"},on:{click:t.createAttr}},[t._v(t._s(t.$t("attribute_create")))])],1),a("a-col",{attrs:{span:5}},[a("a-form",{attrs:{layout:"horizontal"}},[a("a-row",[a("a-col",{staticStyle:{padding:"5px"},attrs:{span:24}},[a("a-form-item",{staticStyle:{margin:"0"}},[a("a-input",{directives:[{name:"debounce",rawName:"v-debounce",value:t.debouncedSearch,expression:"debouncedSearch"}],attrs:{id:"inputSearch",placeholder:t.$t("search")+"..."}})],1)],1)],1)],1)],1)],1)],1),a("a-row",[a("a-table",{attrs:{columns:t.columns,dataSource:t.allAttrs,rowKey:function(t){return t.id},loading:t.loadAttrs,pagination:t.paginationAttrs},on:{change:t.changeAttrs},scopedSlots:t._u([{key:"status",fn:function(e){return[e?a("a-tag",{attrs:{color:"#108ee9"}},[t._v(t._s(t.$t("active")))]):a("a-tag",{attrs:{color:"#f50"}},[t._v(t._s(t.$t("inactive")))])]}},{key:"action",fn:function(e){return[a("a-tooltip",[a("template",{slot:"title"},[t._v(t._s(t.$t("update")))]),a("a-button",{attrs:{id:"buttonUpdate",type:"primary",icon:"edit"},on:{click:function(a){return t.editAttr(e)}}})],2),a("a-popconfirm",{attrs:{slot:"extra",placement:"topRight",title:t.$t("deleteMsg"),okText:t.$t("yes"),cancelText:t.$t("no")},on:{confirm:function(a){return t.deleteAttr(e)}},slot:"extra"},[a("a-tooltip",[a("template",{slot:"title"},[t._v(t._s(t.$t("delete")))]),a("a-button",{attrs:{id:"buttonDelete",type:"danger",icon:"delete"}})],2)],1),a("a-popconfirm",{attrs:{slot:"extra",placement:"topRight",title:e.active?t.$t("blockMsg"):t.$t("unblockMsg"),okText:t.$t("yes"),cancelText:t.$t("no")},on:{confirm:function(a){return t.lockAttr(e)}},slot:"extra"},[a("a-tooltip",[a("template",{slot:"title"},[t._v(t._s(e.active?t.$t("blocked"):t.$t("unblock")))]),a("a-button",{attrs:{id:"buttonDelete",type:e.active?"danger":"primary",icon:e.active?"lock":"unlock",ghost:""}})],2)],1)]}}])})],1),a("AttrCreate",{ref:"attrCreate"})],1)},n=[],i=(a("a4d3"),a("e01a"),a("d81d"),a("b0c0"),a("5530")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{width:"800px",title:t.$t("attribute_create")},on:{cancel:t.hide},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[a("div",{staticStyle:{height:"400px","overflow-y":"scroll"}},[a("a-row",[a("a-col",{staticStyle:{"padding-right":"15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"name",attrs:{label:t.$t("attr_name")+" (Появится на сайте):",prop:"name"}},[a("a-input",{staticStyle:{"margin-left":"0px","margin-right":"0px"},attrs:{type:"text",placeholder:t.$t("attr_name")},model:{value:t.create.name,callback:function(e){t.$set(t.create,"name",e)},expression:"create.name"}})],1)],1),a("a-col",{staticStyle:{"padding-left":"15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"name",attrs:{label:t.$t("attribute_type")}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",placeholder:t.$t("attribute_type"),"filter-option":t.filterOption},model:{value:t.create.type,callback:function(e){t.$set(t.create,"type",e)},expression:"create.type"}},t._l(t.types,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])})),1)],1)],1)],1),a("a-row",[a("a-col",{staticStyle:{"padding-right":"15px"},attrs:{span:12}},[a("a-form-model-item",{attrs:{label:t.$t("description")+" (Полное название атрибута):"}},[a("a-input",{attrs:{type:"text",placeholder:t.$t("description")},model:{value:t.create.description,callback:function(e){t.$set(t.create,"description",e)},expression:"create.description"}})],1)],1),a("a-col",{staticStyle:{"padding-left":"15px"},attrs:{span:12}},[a("a-form-model-item",{attrs:{label:t.$t("order_no")}},[a("a-input",{attrs:{type:"number",placeholder:t.$t("order_no")},model:{value:t.create.order,callback:function(e){t.$set(t.create,"order",e)},expression:"create.order"}})],1)],1)],1),t.create.type?a("a-card",{staticStyle:{margin:"10px 0",border:"3px solid rgb(184, 182, 182)"},attrs:{title:t.$t("preview")}},[a("h3",[a("strong",[t._v(t._s(t.create.name?t.create.name:"Example"))])]),"radio"==t.create.type?a("div",[a("a-radio-group",t._l(t.options,(function(e){return a("a-radio",{key:"radio"+e.name,attrs:{value:e.name}},[t._v(" "+t._s(""===e.name?"Example":e.name)+" ")])})),1)],1):t._e(),"select"==t.create.type?a("div",[a("a-select",{staticStyle:{width:"250px"},attrs:{"default-value":"Example"}},t._l(t.options,(function(e){return a("a-select-option",{key:"select"+e.name},[t._v(" "+t._s(""===e.name?"Example":e.name)+" ")])})),1)],1):t._e(),"checkbox"==t.create.type?a("div",[a("a-checkbox-group",[a("a-row",t._l(t.options,(function(e){return a("a-col",{key:"checkbox"+e.name,attrs:{span:24}},[a("a-checkbox",{attrs:{value:"checkbox"+e.name}},[t._v(" "+t._s(""===e.name?"Example":e.name)+" ")])],1)})),1)],1)],1):t._e(),"text"==t.create.type?a("div",[a("a-input",{staticStyle:{width:"250px"},attrs:{"default-value":"Example",placeholder:"Text"}})],1):t._e(),"number"==t.create.type?a("div",[a("a-input",{staticStyle:{width:"250px"},attrs:{"default-value":"0",type:"number",placeholder:"Number"}})],1):t._e()]):t._e(),t.create.type&&"text"!=t.create.type&&"number"!=t.create.type?a("a-card",{attrs:{title:t.$t("parameter")}},[t._l(t.options,(function(e,r){return a("a-row",{key:r},[a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{attrs:{label:t.$t("option_name")}},[a("a-input",{attrs:{type:"text",placeholder:t.$t("option_name")},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"option.name"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{attrs:{label:t.$t("code")+" (значение):"}},[a("a-row",[a("a-col",{attrs:{span:20}},[a("a-input",{attrs:{type:"text",placeholder:t.$t("code")},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"option.value"}})],1),a("a-col",{attrs:{span:4}},[a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",shape:"circle",icon:"delete"},on:{click:function(e){return t.removeAttr(r)}}})],1)],1)],1)],1)],1)})),a("a-row",[a("a-col",{attrs:{span:24}},[a("a-button",{staticStyle:{width:"97%",margin:"0 1.5%"},attrs:{type:"dashed",icon:"plus"},on:{click:t.addAttr}},[t._v(" "+t._s(t.$t("add"))+" ")])],1)],1)],2):t._e()],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.hide}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.loading},on:{click:t.save}},[t._v(" "+t._s(t.create.edit?t.$t("update"):t.$t("save"))+" ")])],1)],2)},s=[],c=(a("99af"),a("4de4"),a("c975"),a("a434"),a("07ac"),a("5880")),l={data:function(){return{isOpen:!1,create:{type:null},loading:!1,types:[{name:"Select",value:"select"},{name:"Checkbox",value:"checkbox"},{name:"Radio",value:"radio"},{name:"Number",value:"number"},{name:"Text",value:"text"}],options:[{name:"",value:null}]}},methods:Object(i["a"])(Object(i["a"])({},Object(c["mapActions"])(["createAttrs","getAllAttrs","updateAttrs"])),{},{show:function(){this.isOpen=!0},hide:function(){this.isOpen=!1,this.loading=!1,this.clear()},clear:function(){this.create={type:null},this.options=[{name:"",value:null}]},handleOk:function(){this.hide()},addAttr:function(){this.options.push({name:"",value:null})},removeAttr:function(t){this.options.splice(t,1)},optionsChecking:function(){var t=this.options;if("text"===this.create.type||"number"===this.create.type)return!0;if(t.length>0){for(var e=0;e<t.length;e++)if(!t[e].name||!t[e].value)return this.$message.error(this.$t("attr_failed")),!1;return!0}this.$message.error(this.$t("attr_empty"))},dublicatProducts:function(t){var e=this;if(t.length>1){for(var a=[],r=!0,n=0;n<t.length;n++)a.push(Object.values(t[n])[1]);return a.filter((function(t,n){a.indexOf(t)!==n&&(e.$message.error("".concat(n+1," - ").concat(e.$t("attr_dublicate"))),r=!1)})),r}return!0},save:function(){var t=this,e=this.create;if(e.name&&e.type&&this.optionsChecking()&&this.dublicatProducts(this.options)){var a={active:!0,description:e.description,name:e.name,order:e.order,type:e.type,options:"text"===this.create.type||"number"===this.create.type?[]:this.options,id:e.id?e.id:void 0};this.loading=!0,this.create.edit?this.updateAttrs({files:a,edit:this.create.edit}).then((function(e){t.getAllAttrs(),t.loading=!1,t.hide(),t.$message.success(t.$t("successfullyUpdated"))})).catch((function(e){t.$message.error(e.message),t.loading=!1})):this.createAttrs(a).then((function(e){t.loading=!1,t.getAllAttrs(),t.hide()})).catch((function(e){t.$message.error(e.message),t.loading=!1}))}else e.name&&e.type||this.$message.error(this.$t("failedData"))},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}})},p=l,d=(a("5d26"),a("2877")),u=Object(d["a"])(p,o,s,!1,null,"0014ee5b",null),m=u.exports,h={components:{AttrCreate:m},data:function(){return{columns:[{title:this.$t("attr_name"),dataIndex:"name"},{title:this.$t("attribute_type"),dataIndex:"type"},{title:this.$t("status"),dataIndex:"active",scopedSlots:{customRender:"status"}},{title:this.$t("action"),key:"action",width:"20%",scopedSlots:{customRender:"action"}}]}},methods:Object(i["a"])(Object(i["a"])({},Object(c["mapActions"])(["getAllAttrs","deleteAttrs","updateAttrs"])),{},{createAttr:function(){this.$refs.attrCreate.show()},deleteAttr:function(t){var e=this;this.deleteAttrs(t.id).then((function(t){e.getAllAttrs(),e.$message.success("Deleted")})).catch((function(t){e.$message.error(t.message),e.loading=!1}))},editAttr:function(t){var e=this.$refs.attrCreate;e.create.edit=!0,e.create.id=t.id,e.create.name=t.name,e.create.description=t.description,e.create.order=t.order,e.create.type=t.type,e.options=t.options?t.options.map((function(t){return{name:t.name,value:t.value}})):[],this.$refs.attrCreate.show()},lockAttr:function(t){var e=this;this.updateAttrs(t).then((function(t){e.getAllAttrs()})).catch((function(t){e.$message.error(t.message),e.loading=!1}))},debouncedSearch:function(t){this.getAllAttrs({search:t})},changeAttrs:function(t){this.getAllAttrs({page:t})}}),computed:Object(i["a"])({},Object(c["mapGetters"])(["allAttrs","loadAttrs","paginationAttrs"])),created:function(){this.getAllAttrs()}},f=h,y=Object(d["a"])(f,r,n,!1,null,null,null);e["default"]=y.exports},"5d26":function(t,e,a){"use strict";var r=a("f156"),n=a.n(r);n.a},f156:function(t,e,a){}}]);