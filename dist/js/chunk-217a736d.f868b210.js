(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-217a736d"],{"2af2":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-row",[n("a-col",{attrs:{span:12}},[n("a-breadcrumb",{staticStyle:{margin:"10px 5px"}},[n("a-breadcrumb-item",[t._v(t._s(t.$t("customers")))])],1)],1)],1),n("a-card",{attrs:{title:t.$t("list")}},[n("div",{attrs:{slot:"extra"},slot:"extra"},[n("a-form",{attrs:{layout:"horizontal",form:t.form},on:{submit:t.search}},[n("a-row",[n("a-col",{staticStyle:{padding:"5px"},attrs:{span:12}},[n("a-form-item",{staticStyle:{margin:"0"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["search",{initialValue:this.getSearchQuery}],expression:"['search', { initialValue: this.getSearchQuery }]"},{name:"debounce",rawName:"v-debounce",value:t.debouncedSearch,expression:"debouncedSearch"}],attrs:{id:"inputSearch",placeholder:t.$t("phone")+"..."}})],1)],1),n("a-col",{staticStyle:{padding:"5px"},attrs:{span:12}},[n("a-form-item",{staticStyle:{margin:"0"}},[n("a-button",{attrs:{id:"buttonSearch",type:"default","html-type":"submit",icon:"search"}},[t._v(t._s(t.$t("search")))])],1)],1)],1)],1)],1),n("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.getAllCustomers,pagination:t.getPagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e,a){return[n("a-tooltip",[n("template",{slot:"title"},[t._v(t._s(t.$t("read")))]),n("a-button",{attrs:{id:"buttonPreview",type:"default",icon:"eye"},on:{click:function(e){return t.showPreviewModal(a.id)}}})],2),n("router-link",{attrs:{to:"./update/"+a.id}},[n("a-tooltip",[n("template",{slot:"title"},[t._v(t._s(t.$t("update")))]),n("a-button",{attrs:{id:"buttonUpdate",type:"primary",icon:"edit"}})],2)],1),n("a-popconfirm",{attrs:{slot:"extra",placement:"topRight",title:t.$t("deleteMsg"),okText:t.$t("yes"),cancelText:t.$t("no")},on:{confirm:function(e){return t.deleteCustomer(e,a.id)}},slot:"extra"},[n("a-tooltip",[n("template",{slot:"title"},[t._v(t._s(t.$t("delete")))]),n("a-button",{attrs:{id:"buttonDelete",type:"danger",icon:"delete"}})],2)],1)]}}])})],1),t.selectedCustomer?n("a-modal",{attrs:{width:"800px",title:t.$t("previewBranch")},on:{cancel:t.handleCloseModal},model:{value:t.previewVisible,callback:function(e){t.previewVisible=e},expression:"previewVisible"}},[n("a-descriptions",{attrs:{layout:"vertical",bordered:""}},[n("a-descriptions-item",{attrs:{label:t.$t("customer_name")}},[t._v(" "+t._s(t.selectedCustomer.name+" "+t.selectedCustomer.lastname)+" ")]),n("a-descriptions-item",{attrs:{label:t.$t("phone")}},[n("div",{domProps:{innerHTML:t._s(t.selectedCustomer.phone)}})])],1),n("template",{slot:"footer"},[n("a-button",{key:"back",attrs:{id:"buttonCancel"},on:{click:t.handleCancel}},[t._v(" "+t._s(t.$t("cancel"))+" ")])],1)],2):t._e()],1)},i=[],o=(n("d3b7"),n("5530")),r=n("5880"),s=n("b775"),c=n("fff2"),l=n("bf6b"),u={data:function(){return{value:"",data:[],loading:!0,columns:[{title:this.$t("firstName"),dataIndex:"name"},{title:this.$t("lastName"),dataIndex:"lastname"},{title:this.$t("phone"),dataIndex:"phone"},{title:this.$t("action"),key:"action",width:"20%",scopedSlots:{customRender:"action"}}],form:this.$form.createForm(this,{name:"coordinated"}),previewVisible:!1,selectedCustomer:null,filterParams:{}}},computed:Object(o["a"])(Object(o["a"])({},Object(r["mapGetters"])(["customersData","customersPagination","searchQuery"])),{},{getPagination:function(){return this.customersPagination},getAllCustomers:function(){return this.customersData},getSearchQuery:function(){return this.searchQuery}}),mounted:function(){var t=this;this.getCustomers({page:this.customersPagination}).then((function(t){})).catch((function(t){})).finally((function(){return t.loading=!1}))},methods:Object(o["a"])(Object(o["a"])({},Object(r["mapActions"])(["getCustomers","setSearchQuery"])),{},{handleTableChange:function(t){var e=this;this.loading=!0,this.getCustomers({page:t}).then((function(t){})).catch((function(t){return e.requestFailed(t)})).finally((function(){return e.loading=!1}))},calcTotalPrice:function(t){return Object(c["a"])(t)},numberToPrice:function(t){return Object(l["a"])(t)},showPreviewModal:function(t){this.previewVisible=!0,this.getSelectedCustomer(t)},getSelectedCustomer:function(t){var e=this;Object(s["b"])({url:"/customer/profile/".concat(t),method:"get"}).then((function(t){e.selectedCustomer=t.customer}))},handleCancel:function(){this.previewVisible=!1},handleCloseModal:function(){this.selectedCustomer=null},debouncedSearch:function(t){var e=this;this.setSearchQuery(t),this.loading=!0,this.getCustomers().then((function(t){})).catch((function(t){return e.requestFailed(t)})).finally((function(){return e.loading=!1}))},deleteCustomer:function(t,e){var n=this;this.loading=!0,Object(s["b"])({url:"/customer/profile/".concat(e),method:"delete"}).then((function(t){n.$message.success(n.$t("successfullyDeleted")),n.getCustomers({page:n.customersPagination})})).catch((function(t){n.$message.error(n.$t("error"))})).finally((function(){return n.loading=!1}))},search:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,n){e.loading=!0,t||(e.filterParams=n,e.getCustomers().then((function(t){})).catch((function(t){})).finally((function(){return e.loading=!1})))}))}})},d=u,m=n("2877"),h=Object(m["a"])(d,a,i,!1,null,null,null);e["default"]=h.exports},bf6b:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("d3b7"),n("ac1f"),n("25f0"),n("5319");function a(t){return"".concat(t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")," сум")}},fff2:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("13d5");function a(t){return t?t.reduce((function(t,e){return t+=e.quantity*e.price,t}),0):0}}}]);