(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e89a1522"],{"3c256":function(e,t,a){"use strict";var r=a("aadb"),n=a.n(r);n.a},7186:function(e,t,a){},7852:function(e,t,a){"use strict";var r=a("7186"),n=a.n(r);n.a},aadb:function(e,t,a){},b017:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("editor",e._g(e._b({attrs:{"api-key":"jz9zw066y1twsoyxdauivnsw1soymo6l7vi9om94g7ijszt4",initialValue:"",init:{selector:"textarea#image-tools",height:500,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste imagetools wordcount"],toolbar:"insertfile undo redo | styleselect | fontsizeselect bold italic | image media | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link",image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:this.uploader,content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}},"editor",e.$attrs,!1),e.$listeners))},n=[],i=(a("b0c0"),a("ac1f"),a("1276"),a("ca72")),o={name:"TinyEditor",components:{editor:i["a"]},data:function(){return{useDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,document:document}},methods:{uploader:function(e,t,a){var r=document.createElement("input");r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.onchange=function(){var t=this.files[0],a=new FileReader;a.onload=function(){var r="blobid"+(new Date).getTime(),n=window.tinymce.activeEditor.editorUpload.blobCache,i=a.result.split(",")[1],o=n.create(r,t,i);n.add(o),e(o.blobUri(),{title:t.name})},a.readAsDataURL(t)},r.click()}}},l=o,s=a("2877"),d=Object(s["a"])(l,r,n,!1,null,null,null);t["a"]=d.exports},c5447:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-breadcrumb",{staticStyle:{margin:"10px 5px"}},[a("a-breadcrumb-item",[a("router-link",{attrs:{to:"/catalog/brands/list"}},[e._v(e._s(e.$t("brands")))])],1),a("a-breadcrumb-item",[e._v(e._s(e.$t("add")))])],1)],1)],1),a("a-card",{attrs:{title:e.$t("fillIn")}},[a("a-row",[a("v-main")],1)],1)],1)},n=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-switch",{staticStyle:{margin:"15px 0"},attrs:{slot:"extra","checked-children":e.$t("active"),"un-checked-children":e.$t("inactive"),"default-checked":""},slot:"extra",model:{value:e.brand.active,callback:function(t){e.$set(e.brand,"active",t)},expression:"brand.active"}}),a("a-form-model",{ref:"ruleForm",attrs:{model:e.brand,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},on:{submit:e.onSubmit}},[a("a-row",[a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"name",attrs:{label:e.$t("brand_name"),prop:"name"}},[a("a-input",{model:{value:e.brand.name,callback:function(t){e.$set(e.brand,"name",t)},expression:"brand.name"}})],1)],1),this.brandId?a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"url",attrs:{label:e.$t("brand_url"),prop:"url"}},[a("a-input",{attrs:{disabled:""},model:{value:e.brandSlug,callback:function(t){e.brandSlug=t},expression:"brandSlug"}})],1)],1):e._e(),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"order",attrs:{label:e.$t("position"),prop:"order"}},[a("a-input",{attrs:{type:"number"},model:{value:e.brand.order,callback:function(t){e.$set(e.brand,"order",t)},expression:"brand.order"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"preview_text",attrs:{label:e.$t("preview_text"),prop:"preview_text"}},[a("a-input",{model:{value:e.brand.preview_text,callback:function(t){e.$set(e.brand,"preview_text",t)},expression:"brand.preview_text"}})],1)],1),a("a-col",{style:{minHeight:"180px",padding:"0 15px"},attrs:{span:4}},[a("a-form-item",{attrs:{label:e.$t("uploadProductImage")}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{"custom-request":e.uploadImage,"list-type":"picture-card","show-upload-list":!1,"before-upload":e.beforeUpload}},[e.imageUrl?a("img",{attrs:{src:e.imageUrl,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" "+e._s(e.$t("uploadCategoryImage"))+" ")])],1)])],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:24}},[a("a-form-model-item",{ref:"description",attrs:{label:e.$t("description"),prop:"description"}},[a("tinymce",{model:{value:e.brand.description,callback:function(t){e.$set(e.brand,"description",t)},expression:"brand.description"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:24}},[a("a-form-model-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:e.onSubmit}},[e._v(" "+e._s(e.$t("save"))+" ")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:e.resetForm}},[e._v(" "+e._s(e.$t("reset"))+" ")])],1)],1)],1)],1)],1)},o=[],l=(a("a4d3"),a("e01a"),a("b0c0"),a("ac1f"),a("5319"),a("1276"),a("5530")),s=a("b775"),d=a("b017");function c(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}var u={components:{tinymce:d["a"]},data:function(){return{brandId:this.$route.params.id,brandSlug:"",labelCol:{span:24},wrapperCol:{span:24},other:"",loading:!1,imageUrl:"",brand:{name:"",preview_text:"",order:0,description:"",image:"",active:!0},rules:{name:[{required:!0,message:this.$t("required"),trigger:"change"}],order:[{required:!0,message:this.$t("required"),trigger:"change"}]}}},mounted:function(){this.brandId&&this.getBrandAttrs(this.brandId)},updated:function(){},methods:{getBrandAttrs:function(){var e=this;Object(s["b"])({url:"/brand/".concat(this.brandId),method:"get"}).then((function(t){e.brand.active=t.brand.active,e.brand.name=t.brand.name,e.brand.description=t.brand.description,e.brand.order=t.brand.order?t.brand.order:0,e.brandSlug=t.brand.slug,e.imageUrl=t.brand.image,e.brand.image=t.brand.image.split("/")[4],e.brand.preview_text=t.brand.preview_text}))},uploadImage:function(e){var t=this;this.loading=!0;var a=new FormData;a.append("file",e.file),Object(s["b"])({url:"/upload",method:"post",data:a}).then((function(a){c(e.file,(function(e){t.imageUrl=e,t.loading=!1})),t.brand.image=a.filename})).catch((function(e){}))},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t||this.$message.error("You can only upload JPG, PNG file!"),t},onSubmit:function(e){var t=this;e.preventDefault(),this.$refs.ruleForm.validate((function(e){if(!e)return!1;var a="/brand",r="post";t.brandId&&(a="/brand/".concat(t.brandId),r="put");var n={"Content-Type":"application/json"};Object(s["b"])({url:a,method:r,data:Object(l["a"])(Object(l["a"])({},t.brand),{},{image:t.brand.image}),headers:n}).then((function(e){t.$router.replace("/catalog/brands")})).catch((function(e){t.$message.success(t.$t("error"))}))}))},resetForm:function(){this.$refs.ruleForm.resetFields()}}},p=u,m=(a("7852"),a("2877")),b=Object(m["a"])(p,i,o,!1,null,null,null),f=b.exports,g={data:function(){return{}},components:{"v-main":f}},v=g,h=(a("3c256"),Object(m["a"])(v,r,n,!1,null,null,null));t["default"]=h.exports}}]);