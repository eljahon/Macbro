(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1b95e6a"],{"21f8":function(t,e,a){},"2b5d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-breadcrumb",{staticStyle:{margin:"10px 5px"}},[a("a-breadcrumb-item",[a("router-link",{attrs:{to:"/customers/list"}},[t._v(t._s(t.$t("customers")))])],1),a("a-breadcrumb-item",[t._v(t._s(t.$t("add")))])],1)],1)],1),a("a-card",{attrs:{title:t.$t("fillIn")}},[a("a-row",[a("v-main")],1)],1)],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form-model",{ref:"ruleForm",attrs:{model:t.customer,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol},on:{submit:t.onSubmit}},[a("a-row",[a("a-tabs",{attrs:{type:"card"},model:{value:t.activeTabKey,callback:function(e){t.activeTabKey=e},expression:"activeTabKey"}},[a("a-tab-pane",{key:"1",attrs:{tab:t.$t("basicSettings")}},[a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"name",attrs:{label:t.$t("name"),prop:"name"}},[a("a-input",{model:{value:t.customer.name,callback:function(e){t.$set(t.customer,"name",e)},expression:"customer.name"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"lastname",attrs:{label:t.$t("lastName"),prop:"lastname"}},[a("a-input",{model:{value:t.customer.lastname,callback:function(e){t.$set(t.customer,"lastname",e)},expression:"customer.lastname"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"phone",attrs:{label:t.$t("phone"),prop:"phone"}},[a("a-input",{model:{value:t.customer.phone,callback:function(e){t.$set(t.customer,"phone",e)},expression:"customer.phone"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:24}},[a("a-form-model-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:t.onSubmit}},[t._v(" "+t._s(t.$t("save"))+" ")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.resetForm}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:t.$t("orderHistory")}},[a("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.getAllCustomerOrders,pagination:t.getOrdersPagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e,r){return[a("router-link",{attrs:{to:"/order/details/"+r.number}},[a("a-tooltip",[a("template",{slot:"title"},[t._v(t._s(t.$t("read")))]),a("a-button",{attrs:{type:"primary",icon:"link"}})],2)],1)]}},{key:"status",fn:function(e,r){return["cancelled"===r.status?a("a-tag",{attrs:{color:"red"}},[t._v(t._s(t.statusTranslator(r.status)))]):t._e(),"in-process"===r.status?a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.statusTranslator(r.status)))]):t._e(),"finished"===r.status?a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.statusTranslator(r.status)))]):t._e()]}},{key:"tag",fn:function(e){return[a("a-tag",{attrs:{color:"red"}},[t._v(t._s(e))])]}},{key:"total",fn:function(e,r){return[a("div",[t._v(t._s(t.numberToPrice(t.calcTotalPrice(r.items)))+" ")])]}}])})],1)],1)],1)],1)],1)},o=[],c=(a("b0c0"),a("d3b7"),a("ac1f"),a("5319"),a("5530")),i=a("b775"),u=a("5880"),l=a("fff2"),m=a("bf6b"),d={data:function(){return{customerId:this.$route.params.id,labelCol:{span:24},wrapperCol:{span:24},other:"",loading:!1,activeTabKey:"1",customer:{name:"",lastname:"",phone:""},columns:[{title:this.$t("order_number"),key:"tag",dataIndex:"number",scopedSlots:{customRender:"tag"}},{title:this.$t("status"),key:"status",scopedSlots:{customRender:"status"}},{title:this.$t("date"),dataIndex:"created_at"},{title:this.$t("total"),key:"total",width:"20%",scopedSlots:{customRender:"total"}},{title:this.$t("action"),key:"action",width:"20%",scopedSlots:{customRender:"action"}}],rules:{name:[{required:!0,message:this.$t("required"),trigger:"change"}],lastname:[{required:!0,message:this.$t("required"),trigger:"change"}],phone:[{required:!0,message:this.$t("required"),trigger:"change"}]},orderStatus:{"in-process":"В обработке",finished:"Завершено",cancelled:"Отменен"}}},mounted:function(){var t=this;this.getCustomerAttrs(),this.getCustomerOrders({page:null,customerId:this.customerId}).then((function(t){})).catch((function(t){})).finally((function(){return t.loading=!1}))},computed:Object(c["a"])(Object(c["a"])({},Object(u["mapGetters"])(["customerOrders","customerOrdersPagination"])),{},{getOrdersPagination:function(){return this.customerOrdersPagination},getAllCustomerOrders:function(){return this.customerOrders}}),methods:Object(c["a"])(Object(c["a"])({},Object(u["mapActions"])(["getCustomerOrders"])),{},{getCustomerAttrs:function(){var t=this;Object(i["b"])({url:"/customer/profile/".concat(this.customerId),method:"get"}).then((function(e){var a=e.customer,r=a.name,n=a.lastname,s=a.phone;t.customer.name=r,t.customer.lastname=n,t.customer.phone=s}))},handleTableChange:function(t){var e=this;this.loading=!0,this.getCustomerOrders({page:t,customerId:this.customerId}).then((function(t){})).catch((function(t){return e.requestFailed(t)})).finally((function(){return e.loading=!1}))},onSubmit:function(t){var e=this;t.preventDefault(),this.$refs.ruleForm.validate((function(t){if(!t)return!1;var a="/customer/profile/".concat(e.customerId),r="put",n={"Content-Type":"application/json"};Object(i["b"])({url:a,method:r,data:e.customer,headers:n}).then((function(t){e.$router.replace("/customers/list"),e.$message.success(e.$t("successfullyUpdated"))})).catch((function(t){e.$message.error(e.$t("error"))}))}))},resetForm:function(){this.$refs.ruleForm.resetFields()},statusTranslator:function(t){return this.orderStatus[t]},calcTotalPrice:function(t){return Object(l["a"])(t)},numberToPrice:function(t){return Object(m["a"])(t)}})},f=d,p=(a("feaf"),a("2877")),b=Object(p["a"])(f,s,o,!1,null,null,null),h=b.exports,g={data:function(){return{}},components:{"v-main":h}},v=g,y=(a("63ae"),Object(p["a"])(v,r,n,!1,null,null,null));e["default"]=y.exports},"63ae":function(t,e,a){"use strict";var r=a("e131"),n=a.n(r);n.a},bf6b:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("d3b7"),a("ac1f"),a("25f0"),a("5319");function r(t){return"".concat(t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")," сум")}},e131:function(t,e,a){},feaf:function(t,e,a){"use strict";var r=a("21f8"),n=a.n(r);n.a},fff2:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("13d5");function r(t){return t?t.reduce((function(t,e){return t+=e.quantity*e.price,t}),0):0}}}]);