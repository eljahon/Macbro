(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49994680"],{"08fe":function(t,e,a){},3651:function(t,e,a){"use strict";var i=a("41ee"),r=a.n(i);r.a},"41ee":function(t,e,a){},7417:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-breadcrumb",{staticStyle:{margin:"10px 5px"}},[a("a-breadcrumb-item",[a("router-link",{attrs:{to:"/pages/list"}},[t._v(t._s(t.$t("pages")))])],1),a("a-breadcrumb-item",[t._v(t._s(t.$t("add")))])],1)],1)],1),t.edit?a("div",[a("a-card",{attrs:{title:t.$t("fillIn")}},[a("a-row",[a("a-tabs",{attrs:{type:"card"},model:{value:t.activeTabKey,callback:function(e){t.activeTabKey=e},expression:"activeTabKey"}},[a("a-tab-pane",{key:"1"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("flag",{attrs:{iso:"ru"}}),t._v(" Русский ")],1),a("v-main",{ref:"ruEditForm",attrs:{lang:"ru"}})],1),a("a-tab-pane",{key:"2"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("flag",{attrs:{iso:"uz"}}),t._v(" O'zbekcha ")],1),a("v-main",{ref:"uzEditForm",attrs:{lang:"uz"}})],1)],1)],1)],1)],1):a("div",[a("a-card",{attrs:{title:t.$t("fillIn")}},[a("a-row",[a("v-main",{ref:"createForm"})],1)],1)],1),a("a-row",[a("a-col",{staticStyle:{padding:"15px 0"},attrs:{span:24}},[a("a-form-model-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v(" "+t._s(t.$t("save"))+" ")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[t._v(" "+t._s(t.$t("reset"))+" ")])],1)],1)],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-switch",{staticStyle:{margin:"15px 0"},attrs:{slot:"extra","checked-children":t.$t("active"),"un-checked-children":t.$t("inactive"),"default-checked":""},slot:"extra",model:{value:t.page.active,callback:function(e){t.$set(t.page,"active",e)},expression:"page.active"}}),a("a-form-model",{ref:"ruleForm",attrs:{model:t.page,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol},on:{submit:t.onSubmit}},[a("a-tabs",{attrs:{type:"card"},on:{change:t.activeTabHandler},model:{value:t.activeTabKey,callback:function(e){t.activeTabKey=e},expression:"activeTabKey"}},[a("a-tab-pane",{key:"1",attrs:{tab:t.$t("basicSettings")}},[a("a-row",[a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"name",attrs:{label:t.$t("name"),prop:"name"}},[a("a-input",{model:{value:t.page.title,callback:function(e){t.$set(t.page,"title",e)},expression:"page.title"}})],1)],1),this.pageSlug?a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:12}},[a("a-form-model-item",{ref:"url",attrs:{label:t.$t("url"),prop:"url"}},[a("a-input",{attrs:{disabled:""},model:{value:t.pageSlug,callback:function(e){t.pageSlug=e},expression:"pageSlug"}})],1)],1):t._e(),a("a-col",{style:{minHeight:"180px",padding:"0 15px"},attrs:{span:24}},[a("a-form-item",{attrs:{label:t.$t("uploadPreviewImage")}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{"custom-request":t.uploadImage,"list-type":"picture-card","show-upload-list":!1,"before-upload":t.beforeUpload}},[t.imageUrl?a("img",{attrs:{src:t.imageUrl,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v(" "+t._s(t.$t("uploadPreviewImage"))+" ")])],1)])],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:24}},[a("a-form-model-item",{ref:"content",attrs:{label:t.$t("content"),prop:"content"}},[a("tinymce",{model:{value:t.page.content,callback:function(e){t.$set(t.page,"content",e)},expression:"page.content"}})],1)],1)],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:t.$t("SEO")}},[a("a-row",[a("a-col",{staticStyle:{padding:"0 15px"},attrs:{md:24,lg:8}},[a("a-form-model-item",{ref:"meta_title",attrs:{label:t.$t("meta_title"),prop:"meta_title"}},[a("a-input",{model:{value:t.page.meta.title,callback:function(e){t.$set(t.page.meta,"title",e)},expression:"page.meta.title"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{md:24,lg:8}},[a("a-form-model-item",{ref:"meta_desc",attrs:{label:t.$t("meta_description"),prop:"meta_desc"}},[a("a-input",{model:{value:t.page.meta.description,callback:function(e){t.$set(t.page.meta,"description",e)},expression:"page.meta.description"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{md:24,lg:8}},[a("a-form-model-item",{ref:"meta_tags",attrs:{label:t.$t("meta_tags"),prop:"meta_tags"}},[a("a-input",{model:{value:t.page.meta.tags,callback:function(e){t.$set(t.page.meta,"tags",e)},expression:"page.meta.tags"}})],1)],1)],1)],1)],1)],1)],1)},l=[],o=(a("a4d3"),a("e01a"),a("d3b7"),a("ac1f"),a("5319"),a("1276"),a("5530")),s=a("b017"),c=a("b775");function u(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)}var p={components:{tinymce:s["a"]},props:{lang:String},data:function(){return{pageSlug:this.$route.params.id,labelCol:{span:24},wrapperCol:{span:24},other:"",activeTabKey:"1",loading:!1,imageUrl:"",page:{title:"",content:"",preview_image:"",active:!0,meta:{title:"",description:"",tags:""}},rules:{title:[{required:!0,message:this.$t("required"),trigger:"change"}]}}},mounted:function(){this.pageSlug&&this.getPageAttrs(this.pageSlug).then((function(t){})).catch((function(t){}))},computed:{},methods:{getPageAttrs:function(t){var e=this;return new Promise((function(a){Object(c["b"])({url:"/page/".concat(t),method:"get",params:{lang:e.lang||""}}).then((function(t){a();var i=t.page,r=i.title,n=i.content,l=i.preview_image,o=i.active,s=i.slug,c=i.meta,u=c.title,p=c.description,m=c.tags;e.page.title=r,e.pageSlug=s,e.page.content=n,e.page.active=o,e.page.preview_image=l.split("/")[4]||"",e.imageUrl=l,e.page.meta.title=u,e.page.meta.description=p,e.page.meta.tags=m}))}))},activeTabHandler:function(t){this.activeTabKey=t},uploadImage:function(t){var e=this;this.loading=!0;var a=new FormData;a.append("file",t.file),Object(c["b"])({url:"/upload",method:"post",data:a}).then((function(a){u(t.file,(function(t){e.imageUrl=t,e.loading=!1})),e.page.preview_image=a.filename}))},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;return e||this.$message.error("You can only upload JPG, PNG file!"),e},onReady:function(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},onSubmit:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;var a,i="/page",r="post";t.pageSlug&&(i="/page/".concat(t.pageSlug),r="put");var n={"Content-Type":"application/json"};Object(c["b"])({url:i,method:r,data:Object(o["a"])(Object(o["a"])({},t.page),{},{lang:null!==(a=t.lang)&&void 0!==a?a:"ru"}),headers:n}).then((function(e){t.$router.replace("/pages/list")})).catch((function(e){t.$message.error(t.$t("error"))}))}))},resetForm:function(){this.$refs.ruleForm.resetFields()}}},m=p,d=(a("efea"),a("2877")),g=Object(d["a"])(m,n,l,!1,null,null,null),f=g.exports,b={data:function(){return{activeTabKey:"1",edit:!!this.$route.params.id}},mounted:function(){},updated:function(){},methods:{submit:function(){if(this.edit){if(!this.$refs.uzEditForm)return void this.$refs.ruEditForm.onSubmit();this.$refs.ruEditForm.onSubmit(),this.$refs.uzEditForm.onSubmit()}else this.$refs.createForm.onSubmit()},resetForm:function(){if(this.edit){if(!this.$refs.uzEditForm)return void this.$refs.ruEditForm.resetForm();this.$refs.ruEditForm.resetForm(),this.$refs.uzEditForm.resetForm()}else this.$refs.createForm.resetForm()}},components:{"v-main":f}},v=b,h=(a("3651"),Object(d["a"])(v,i,r,!1,null,null,null));e["default"]=h.exports},b017:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("editor",t._g(t._b({attrs:{inline:"","api-key":"jz9zw066y1twsoyxdauivnsw1soymo6l7vi9om94g7ijszt4",initialValue:"",init:{selector:"textarea#image-tools",height:500,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste imagetools wordcount"],toolbar:"insertfile undo redo | styleselect | fontsizeselect bold italic | image media | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link",image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:this.uploader,content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}},"editor",t.$attrs,!1),t.$listeners))},r=[],n=(a("b0c0"),a("ac1f"),a("1276"),a("ca72")),l={name:"TinyEditor",components:{editor:n["a"]},data:function(){return{useDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,document:document}},methods:{uploader:function(t,e,a){var i=document.createElement("input");i.setAttribute("type","file"),i.setAttribute("accept","image/*"),i.onchange=function(){var e=this.files[0],a=new FileReader;a.onload=function(){var i="blobid"+(new Date).getTime(),r=window.tinymce.activeEditor.editorUpload.blobCache,n=a.result.split(",")[1],l=r.create(i,e,n);r.add(l),t(l.blobUri(),{title:e.name})},a.readAsDataURL(e)},i.click()}}},o=l,s=a("2877"),c=Object(s["a"])(o,i,r,!1,null,null,null);e["a"]=c.exports},efea:function(t,e,a){"use strict";var i=a("08fe"),r=a.n(i);r.a}}]);