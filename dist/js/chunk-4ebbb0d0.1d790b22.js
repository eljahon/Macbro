(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ebbb0d0"],{"222d":function(e,t,a){"use strict";var i=a("c26f"),r=a.n(i);r.a},"6afb":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-breadcrumb",{staticStyle:{margin:"10px 5px"}},[a("a-breadcrumb-item",[a("router-link",{attrs:{to:"/news/list"}},[e._v(e._s(e.$t("news")))])],1),a("a-breadcrumb-item",[e._v(e._s(e.$t("add")))])],1)],1)],1),e.edit?a("div",[a("a-card",{attrs:{title:e.$t("fillIn")}},[a("a-row",[a("a-tabs",{attrs:{type:"card"},model:{value:e.activeTabKey,callback:function(t){e.activeTabKey=t},expression:"activeTabKey"}},[a("a-tab-pane",{key:"1"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("flag",{attrs:{iso:"ru"}}),e._v(" Русский ")],1),a("v-main",{ref:"ruEditForm",attrs:{lang:"ru"}})],1),a("a-tab-pane",{key:"2"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("flag",{attrs:{iso:"uz"}}),e._v(" O'zbekcha ")],1),a("v-main",{ref:"uzEditForm",attrs:{lang:"uz"}})],1)],1)],1)],1)],1):a("div",[a("a-card",{attrs:{title:e.$t("fillIn")}},[a("a-row",[a("v-main",{ref:"createForm"})],1)],1)],1),a("a-row",[a("a-col",{staticStyle:{padding:"15px 0"},attrs:{span:24}},[a("a-form-model-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v(" "+e._s(e.$t("save"))+" ")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return t.preventDefault(),e.resetForm(t)}}},[e._v(" "+e._s(e.$t("reset"))+" ")])],1)],1)],1)],1)},r=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-switch",{staticStyle:{margin:"15px 0"},attrs:{slot:"extra","checked-children":e.$t("active"),"un-checked-children":e.$t("inactive"),"default-checked":""},slot:"extra",model:{value:e.news.active,callback:function(t){e.$set(e.news,"active",t)},expression:"news.active"}}),a("a-form-model",{ref:"ruleForm",attrs:{model:e.news,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},on:{submit:e.onSubmit}},[a("a-tabs",{attrs:{type:"card"},on:{change:e.activeTabHandler},model:{value:e.activeTabKey,callback:function(t){e.activeTabKey=t},expression:"activeTabKey"}},[a("a-tab-pane",{key:"1",attrs:{tab:e.$t("basicSettings")}},[a("a-row",[this.newsSlug?a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:24}},[a("a-form-model-item",{ref:"url",attrs:{label:e.$t("url"),prop:"url"}},[a("a-input",{attrs:{disabled:""},model:{value:e.newsSlug,callback:function(t){e.newsSlug=t},expression:"newsSlug"}})],1)],1):e._e(),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:24}},[a("a-form-model-item",{ref:"title",attrs:{label:e.$t("news_title"),prop:"title"}},[a("a-input",{model:{value:e.news.title,callback:function(t){e.$set(e.news,"title",t)},expression:"news.title"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:24}},[a("a-form-model-item",{ref:"description",attrs:{label:e.$t("description"),prop:"description"}},[a("tinymce",{model:{value:e.news.description,callback:function(t){e.$set(e.news,"description",t)},expression:"news.description"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{span:24}},[a("a-form-model-item",{ref:"fullText",attrs:{label:e.$t("full_text"),prop:"fullText"}},[a("tinymce",{model:{value:e.news.full_text,callback:function(t){e.$set(e.news,"full_text",t)},expression:"news.full_text"}})],1)],1)],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:e.$t("images")}},[a("a-row",[a("a-col",{style:{padding:"0 15px"},attrs:{span:24}},[a("a-form-item",{attrs:{label:e.$t("uploadImage")}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{"custom-request":e.uploadImage,"list-type":"picture-card","show-upload-list":!1,"before-upload":e.beforeUpload}},[e.imageUrl?a("img",{staticClass:"upload-img",attrs:{src:e.imageUrl,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" "+e._s(e.$t("uploadImage"))+" ")])],1)])],1)],1),a("a-col",{style:{minHeight:"180px",padding:"0 15px"},attrs:{span:24}},[a("a-form-item",{ref:"previewImage",attrs:{label:e.$t("uploadNewsPreviewImage"),prop:"previewImage"}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{"custom-request":e.uploadPreviewImage,"list-type":"picture-card","show-upload-list":!1,"before-upload":e.beforeUpload}},[e.previewImageUrl?a("img",{staticClass:"upload-img",attrs:{src:e.previewImageUrl,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" "+e._s(e.$t("uploadPreviewImage"))+" ")])],1)])],1)],1)],1)],1),a("a-tab-pane",{key:"3",attrs:{tab:e.$t("SEO")}},[a("a-row",[a("a-col",{staticStyle:{padding:"0 15px"},attrs:{md:24,lg:8}},[a("a-form-model-item",{ref:"meta_title",attrs:{label:e.$t("meta_title"),prop:"meta_title"}},[a("a-input",{model:{value:e.news.meta.title,callback:function(t){e.$set(e.news.meta,"title",t)},expression:"news.meta.title"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{md:24,lg:8}},[a("a-form-model-item",{ref:"meta_desc",attrs:{label:e.$t("meta_description"),prop:"meta_desc"}},[a("a-input",{model:{value:e.news.meta.description,callback:function(t){e.$set(e.news.meta,"description",t)},expression:"news.meta.description"}})],1)],1),a("a-col",{staticStyle:{padding:"0 15px"},attrs:{md:24,lg:8}},[a("a-form-model-item",{ref:"meta_tags",attrs:{label:e.$t("meta_tags"),prop:"meta_tags"}},[a("a-input",{model:{value:e.news.meta.tags,callback:function(t){e.$set(e.news.meta,"tags",t)},expression:"news.meta.tags"}})],1)],1)],1)],1)],1)],1)],1)},n=[],l=(a("a4d3"),a("e01a"),a("99af"),a("ac1f"),a("1276"),a("5530")),o=a("b017"),c=a("b775");function u(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}var d={components:{tinymce:o["a"]},props:{lang:String},data:function(){return{activeTabKey:"1",newsSlug:this.$route.params.id,labelCol:{span:24},wrapperCol:{span:24},other:"",loading:!1,imageUrl:"",previewImageUrl:"",news:{title:"",description:"",imageURL:"",preview_image:"",full_text:"",active:!0,meta:{title:"",description:"",tags:""}},rules:{title:[{required:!0,message:this.$t("required"),trigger:"change"}],order:[{required:!0,message:this.$t("required"),trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}],previewImage:[{required:!0,message:"Please add preview image",trigger:"blur"}]}}},mounted:function(){this.newsSlug&&this.getNewsAttrs(this.newsSlug)},methods:{getNewsAttrs:function(){var e=this;Object(c["b"])({url:"/new/".concat(this.newsSlug,"?lang=").concat(this.lang),method:"get"}).then((function(t){var a=t.new,i=a.title,r=a.description,s=a.active,n=a.preview_image,l=a.imageURL,o=a.meta,c=a.full_text;e.news.title=i,e.news.description=r,e.news.active=s,e.news.meta=o,e.news.full_text=c,e.news.preview_image=n.split("/")[4]||"",e.news.imageURL=l.split("/")[4]||"",e.imageUrl=l,e.previewImageUrl=n}))},uploadImage:function(e){var t=this;this.loading=!0;var a=new FormData;a.append("file",e.file),Object(c["b"])({url:"/upload",method:"post",data:a}).then((function(a){u(e.file,(function(e){t.imageUrl=e,t.loading=!1})),t.news.imageURL=a.filename}))},uploadPreviewImage:function(e){var t=this;this.loading=!0;var a=new FormData;a.append("file",e.file),Object(c["b"])({url:"/upload",method:"post",data:a}).then((function(a){u(e.file,(function(e){t.previewImageUrl=e,t.loading=!1})),t.news.preview_image=a.filename}))},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t||this.$message.error("You can only upload JPG, PNG file!"),t},onReady:function(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},onSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var a,i="/new",r="post";e.newsSlug&&(i="/new/".concat(e.newsSlug),r="put");var s={"Content-Type":"application/json"};e.news.preview_image?Object(c["b"])({url:i,method:r,data:Object(l["a"])(Object(l["a"])({},e.news),{},{lang:null!==(a=e.lang)&&void 0!==a?a:"ru"}),headers:s}).then((function(t){e.$router.push("/news/list")})).catch((function(t){e.$message.success(e.$t("error"))})):e.$message.error("Please add preview image")}))},resetForm:function(){this.$refs.ruleForm.resetFields()},activeTabHandler:function(e){this.activeTabKey=e}}},m=d,p=a("2877"),f=Object(p["a"])(m,s,n,!1,null,null,null),g=f.exports,b={data:function(){return{activeTabKey:"1",edit:!!this.$route.params.id}},mounted:function(){},updated:function(){},methods:{submit:function(){if(this.edit){if(!this.$refs.uzEditForm)return void this.$refs.ruEditForm.onSubmit();this.$refs.ruEditForm.onSubmit(),this.$refs.uzEditForm.onSubmit()}else this.$refs.createForm.onSubmit()},resetForm:function(){if(this.edit){if(!this.$refs.uzEditForm)return void this.$refs.ruEditForm.resetForm();this.$refs.ruEditForm.resetForm(),this.$refs.uzEditForm.resetForm()}else this.$refs.createForm.resetForm()}},components:{"v-main":g}},v=b,w=(a("222d"),Object(p["a"])(v,i,r,!1,null,null,null));t["default"]=w.exports},b017:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("editor",e._g(e._b({attrs:{inline:"","api-key":"jz9zw066y1twsoyxdauivnsw1soymo6l7vi9om94g7ijszt4",initialValue:"",init:{selector:"textarea#image-tools",height:500,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste imagetools wordcount"],toolbar:"insertfile undo redo | styleselect | fontsizeselect bold italic | image media | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link",image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:this.uploader,content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}},"editor",e.$attrs,!1),e.$listeners))},r=[],s=(a("b0c0"),a("ac1f"),a("1276"),a("ca72")),n={name:"TinyEditor",components:{editor:s["a"]},data:function(){return{useDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,document:document}},methods:{uploader:function(e,t,a){var i=document.createElement("input");i.setAttribute("type","file"),i.setAttribute("accept","image/*"),i.onchange=function(){var t=this.files[0],a=new FileReader;a.onload=function(){var i="blobid"+(new Date).getTime(),r=window.tinymce.activeEditor.editorUpload.blobCache,s=a.result.split(",")[1],n=r.create(i,t,s);r.add(n),e(n.blobUri(),{title:t.name})},a.readAsDataURL(t)},i.click()}}},l=n,o=a("2877"),c=Object(o["a"])(l,i,r,!1,null,null,null);t["a"]=c.exports},c26f:function(e,t,a){}}]);