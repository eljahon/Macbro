(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20f2010c"],{"10cd":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-breadcrumb",{staticStyle:{margin:"10px 5px"}},[a("a-breadcrumb-item",[t._v(t._s(t.$t("orders")))])],1)],1)],1),a("a-card",{attrs:{title:t.$t("list")}},[a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-form",{attrs:{layout:"horizontal",form:t.form},on:{submit:t.search}},[a("a-row",[a("a-col",{staticStyle:{padding:"5px"},attrs:{span:12}},[a("a-form-item",{staticStyle:{margin:"0"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["search",{initialValue:this.getSearchQuery}],expression:"['search', { initialValue: this.getSearchQuery }]"},{name:"debounce",rawName:"v-debounce",value:t.debouncedSearch,expression:"debouncedSearch"}],attrs:{id:"inputSearch",placeholder:t.$t("search")+"..."}})],1)],1),a("a-col",{staticStyle:{padding:"5px"},attrs:{span:12}},[a("a-form-item",{staticStyle:{margin:"0"}},[a("a",{attrs:{href:t.excelFile}},[a("a-button",{attrs:{type:"success",icon:"file-excel"},on:{click:t.exportExcel}},[t._v("Export")])],1)])],1)],1)],1)],1),a("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.getAllOrders,pagination:t.getPagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"tag",fn:function(e){return[a("a-tag",{attrs:{color:"red"}},[t._v(t._s(e))])]}},{key:"status",fn:function(e,r){return["cancelled"===r.status?a("a-tag",{attrs:{color:"red"}},[t._v(t._s(t.statusTranslator(r.status)))]):t._e(),"in-process"===r.status?a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.statusTranslator(r.status)))]):t._e(),"finished"===r.status?a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.statusTranslator(r.status)))]):t._e()]}},{key:"action",fn:function(e,r){return[a("router-link",{attrs:{to:"/order/details/"+r.number}},[a("a-tooltip",[a("template",{slot:"title"},[t._v(t._s(t.$t("read")))]),a("a-button",{attrs:{id:"buttonPreview",type:"default",icon:"link"}})],2)],1),a("router-link",{attrs:{to:"/order/edit/"+r.number}},[a("a-tooltip",[a("template",{slot:"title"},[t._v(t._s(t.$t("update")))]),a("a-button",{attrs:{id:"buttonOrderDetails",type:"primary",icon:"edit"}})],2)],1)]}},{key:"total",fn:function(e,r){return[a("div",[t._v(t._s(t.numberToPrice(t.calcTotalPrice(r.items)))+" ")])]}}])})],1),t.selectedOrder?a("a-modal",{attrs:{width:"800px",title:t.$t("previewBranch")},on:{cancel:t.handleCloseModal},model:{value:t.previewVisible,callback:function(e){t.previewVisible=e},expression:"previewVisible"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",attrs:{id:"buttonCancel"},on:{click:t.handleCancel}},[t._v(" "+t._s(t.$t("cancel"))+" ")])],1)],2):t._e()],1)},n=[],i=(a("d3b7"),a("5530")),o=a("5880"),s=a("b775"),c=a("fff2"),l=a("bf6b"),u={data:function(){return{value:"",excelFile:null,data:[],loading:!0,columns:[{title:this.$t("order_number"),key:"tag",dataIndex:"number",scopedSlots:{customRender:"tag"},width:"10%"},{title:this.$t("customer_name"),dataIndex:"customer_name"},{title:this.$t("phone"),dataIndex:"phone"},{title:this.$t("date"),dataIndex:"created_at",width:"20%"},{title:this.$t("total"),key:"total",width:"20%",scopedSlots:{customRender:"total"}},{title:this.$t("status"),key:"status",scopedSlots:{customRender:"status"}},{title:this.$t("action"),key:"action",width:"10%",scopedSlots:{customRender:"action"}}],form:this.$form.createForm(this,{name:"coordinated"}),previewVisible:!1,selectedOrder:null,filterParams:{},orderStatus:{"in-process":"В обработке",finished:"Завершено",cancelled:"Отменен"}}},computed:Object(i["a"])(Object(i["a"])({},Object(o["mapGetters"])(["ordersData","ordersPagination","searchQuery"])),{},{getPagination:function(){return this.ordersPagination},getAllOrders:function(){return this.ordersData},getSearchQuery:function(){return this.searchQuery}}),mounted:function(){var t=this;this.exportExcel(),this.getOrders({page:this.ordersPagination}).then((function(t){})).catch((function(t){})).finally((function(){return t.loading=!1}))},methods:Object(i["a"])(Object(i["a"])({},Object(o["mapActions"])(["getOrders","setSearchQuery"])),{},{handleTableChange:function(t){var e=this;this.loading=!0,this.getOrders({page:t,search:!0}).then((function(t){})).catch((function(t){return e.requestFailed(t)})).finally((function(){return e.loading=!1}))},calcTotalPrice:function(t){return Object(c["a"])(t)},numberToPrice:function(t){return Object(l["a"])(t)},exportExcel:function(){var t=this;Object(s["b"])({url:"/order-report-excel",method:"GET"}).then((function(e){t.excelFile=e.filename})).catch((function(e){t.$message.error("Системная ошибка "+e.message)}))},getSelectedOrder:function(t){var e=this;Object(s["b"])({url:"/order/".concat(t),method:"get"}).then((function(t){e.selectedOrder=t}))},handleCancel:function(){this.previewVisible=!1},handleCloseModal:function(){this.selectedOrder=null},debouncedSearch:function(t){var e=this;this.setSearchQuery(t),this.loading=!0,this.getOrders().then((function(t){})).catch((function(t){return e.requestFailed(t)})).finally((function(){return e.loading=!1}))},deleteOrder:function(t,e){var a=this;this.loading=!0,Object(s["b"])({url:"/order/".concat(e),method:"delete"}).then((function(t){a.$message.success(a.$t("successfullyDeleted")),a.getOrders({page:a.ordersPagination})})).catch((function(t){a.$message.error(a.$t("error"))})).finally((function(){return a.loading=!1}))},search:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){e.loading=!0,t||(e.filterParams=a,e.getOrders().then((function(t){})).catch((function(t){})).finally((function(){return e.loading=!1})))}))},statusTranslator:function(t){return this.orderStatus[t]}})},d=u,f=(a("b6d7"),a("2877")),h=Object(f["a"])(d,r,n,!1,null,null,null);e["default"]=h.exports},"98d7":function(t,e,a){},b6d7:function(t,e,a){"use strict";var r=a("98d7"),n=a.n(r);n.a},bf6b:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("d3b7"),a("ac1f"),a("25f0"),a("5319");function r(t){return"".concat(t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")," сум")}},fff2:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("13d5");function r(t){return t?t.reduce((function(t,e){return t+=e.quantity*e.price,t}),0):0}}}]);